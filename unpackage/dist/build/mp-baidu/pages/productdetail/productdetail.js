(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/productdetail/productdetail"],{1901:function(t,i,o){"use strict";o.r(i);var s=o("b8a6"),e=o("e753");for(var n in e)"default"!==n&&function(t){o.d(i,t,(function(){return e[t]}))}(n);o("eadb");var a,c=o("f0c5"),d=Object(c["a"])(e["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],a);i["default"]=d.exports},"50f3":function(t,i,o){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(){o.e("components/uni-swiper-dot/uni-swiper-dot").then(function(){return resolve(o("08d4"))}.bind(null,o)).catch(o.oe)},e={data:function(){return{isactive:1,current:0,h:"",toplist:[],iscoupon:!1,isreceive:1,isparameter:!1,iscar:!1,iscollect:!0,iscollecting:!1,isuncollecting:!1,isofflineexperience:!1,ismodel:!1,ismactive:"",issuccessjoin:!1,joincars:!1,nowjoincars:!1,goodsid:"",goodsdata:[],imglist:[],imglists:[],idlist:[],namelist:"未选择",pages:"",cont:"",prices:"",imgurls:"",htmlNodes:"",chose_list:[],name_list:[],collectis:0,id:"",numval:1,list:[],len:0}},onReady:function(){this.getNodesInfo()},onLoad:function(t){this.goodsid=t.id,this.getgoodstock(t.id),this.pages=t.urls,console.log(this.id),this.getNodesInfo()},methods:{callback:function(t){console.log("name",t),this.$refs.uToast.show({title:t,type:"default"})},back:function(){t.switchTab({url:"/"+pages})},car:function(){t.navigateTo({url:"../car/car"}),console.log(1)},coupon:function(){this.iscoupon=!0},receive:function(){this.isreceive=2},close:function(){this.iscoupon=!1},changnav:function(t){this.isactive=t,this.h="po"+t},change:function(t){this.current=t.detail.current},scroll:function(t){var i=t.target.scrollTop+100,o=(this.toplist[0],this.toplist[1]),s=this.toplist[2];this.isactive=i>=o&&i<s?2:i>=s?3:1},scrolltolower:function(){var t=this;setTimeout((function(){t.isactive=3}),10)},getdata:function(){var i=this;t.request({url:this.common.websiteUrl+"user_cart_index",header:{"user-token":"6a109faf305513d443337ddb1ad4cb9b"},method:"post",data:{user_id:this.id},success:function(t){console.log(t.data.data),console.log(t),i.list=t.data.data;for(var o=0;o<i.list.length;o++){var s=i.list[o];i.len+=s.list.length}console.log(i.len)}})},getNodesInfo:function(){var i=this,o=t.createSelectorQuery().in(this);o.selectAll(".title").boundingClientRect().exec((function(t){console.log(t);var o=t[0],s=[];o.map((function(t){s.push(t.top)})),i.toplist=s}))},checkassess:function(i){t.navigateTo({url:"../assess/assess?id="+this.goodsdata.product.id})},parameter:function(){this.isparameter=!0},pclose:function(){this.isparameter=!1},collect:function(){var i=this;this.collectis=1,this.iscollect=!0,this.iscollecting=!1,this.isuncollecting=!0,setTimeout((function(){i.isuncollecting=!1}),2e3),console.log(this.id),t.request({url:this.common.websiteUrl+"user_coll",header:{"user-token":"6a109faf305513d443337ddb1ad4cb9b"},method:"post",data:{user_id:this.id,pid:this.goodsdata.product.id,type:1,coll_is:this.collectis},success:function(t){}})},uncollect:function(){var i=this;this.collectis=0,this.iscollect=!1,this.iscollecting=!0,this.isuncollecting=!1,setTimeout((function(){i.iscollecting=!1}),2e3),console.log(this.id),t.request({url:this.common.websiteUrl+"user_coll",header:{"user-token":"6a109faf305513d443337ddb1ad4cb9b"},method:"post",data:{user_id:this.id,pid:this.goodsdata.product.id,type:1,coll_is:this.collectis},success:function(t){}})},offlineexperience:function(){this.isofflineexperience=!0},oclose:function(){this.isofflineexperience=!1},model:function(){this.ismodel=!0},mclose:function(){this.ismodel=!1},mchange:function(i,o){for(var s=this,e=0;e<this.goodsdata.main[i]["second"].length;e++)this.goodsdata.main[i]["second"][e].activs="";this.goodsdata.main[i]["second"][o].activs="mactive",this.goodsdata.main[i]["choice_name"]=this.goodsdata.main[i]["second"][o].name,this.chose_list[i]=this.goodsdata.main[i]["second"][o].id,this.name_list[i]=this.goodsdata.main[i]["second"][o].name,this.idlist=this.chose_list.join(","),this.namelist=this.name_list.join("-"),console.log(this.idlist),this.chose_list.length==this.goodsdata.main.length&&t.request({url:this.common.websiteUrl+"product_index_para",header:{"user-token":"6a109faf305513d443337ddb1ad4cb9b"},method:"post",data:{reals:this.idlist},success:function(t){s.prices=t.data.data.price,s.imgurls=t.data.data.img_url,console.log(t.data.data)}})},valChange:function(t){this.numval=t.value,console.log(this.numval)},joincar:function(){var i=this;this.goodsdata.main.length>0?(this.ismodel=!0,this.joincars=!0,this.nowjoincars=!1):(this.iscar=!0,this.issuccessjoin=!0,setTimeout((function(){i.issuccessjoin=!1}),2e3),t.request({url:this.common.websiteUrl+"user_cart_add",header:{"user-token":"6a109faf305513d443337ddb1ad4cb9b"},method:"post",data:{user_id:this.id,pro_id:this.goodsdata.product.id,reals:this.idlist,pro_num:this.numval},success:function(t){}}),this.getdata()),console.log(this.goodsdata.product.id),console.log(this.id)},nowjoincar:function(){this.goodsdata.main.length>0?(this.ismodel=!0,this.nowjoincars=!0,this.joincars=!1):t.navigateTo({url:"../buildorder/buildorder"})},ordernow:function(){var i=this;console.log(this.goodsdata.product.id),this.chose_list.length==this.goodsdata.main.length?(console.log(this.id),console.log(this.goodsdata.product.id),console.log(this.idlist),console.log(this.numval),1==this.joincars?(this.ismodel=!1,this.iscar=!0,setTimeout((function(){i.issuccessjoin=!0}),100),setTimeout((function(){i.issuccessjoin=!1}),2e3)):1==this.nowjoincars?t.navigateTo({url:"../buildorder/buildorder"}):0==this.nowjoincars&&0==this.joincars&&(this.ismodel=!1,this.iscar=!0,this.issuccessjoin=!0,setTimeout((function(){i.issuccessjoin=!1}),2e3)),this.getdata(),t.request({url:this.common.websiteUrl+"user_cart_add",header:{"user-token":"6a109faf305513d443337ddb1ad4cb9b"},method:"post",data:{user_id:this.id,pro_id:this.goodsdata.product.id,reals:this.idlist,pro_num:this.numval},success:function(t){console.log("yanghang")}})):this.callback("请选择参数")},getimgurl:function(t){return"http://uniapp.ruange.com.cn/"+t},getgoodstock:function(i){var o=this;t.request({url:this.common.websiteUrl+"product_index_details",header:{"user-token":"6a109faf305513d443337ddb1ad4cb9b"},method:"post",data:{id:i},success:function(i){if(console.log(i.data),o.goodsdata=i.data.data,o.imglist=i.data.data.product.pro_imglist.split("|"),i.data.data.comment)for(var s=0;s<i.data.data.comment.length;s++){o.goodsdata.comment[s].imglist=i.data.data.comment[s].imglist.split("|");var e=new Date(1e3*i.data.data.comment[s].time);o.goodsdata.comment[s].time=e.getFullYear()+"-"+e.getMonth()+"1-"+e.getDate()}o.prices=i.data.data.product.price,o.imgurls=i.data.data.product.pro_thum_img,o.htmlNodes=i.data.data.product.content;var n=i.data.data.product.content,a=new RegExp("<img","gi");n=n.replace(a,'<img style="max-width: 100%;"'),o.htmlNodes=n,t.getStorage({key:"userinfo",success:function(i){console.log("获取到了"),console.log(i.data.id),o.id=i.data.id,t.request({url:o.common.websiteUrl+"user_coll_see",header:{"user-token":"6a109faf305513d443337ddb1ad4cb9b"},method:"post",data:{user_id:i.data.id,pid:o.goodsdata.product.id,type:1},success:function(t){1==t.data.code?(console.log("?"),o.iscollect=!1):o.iscollect=!0,console.log("设置")}})},fail:function(){console.log(22222222)}})}})},brand:function(){t.navigateTo({url:"../branddetail/branddetail?id="+this.goodsdata.shopbrand.id})}},components:{uniSwiperDot:s}};i.default=e}).call(this,o("5486")["default"])},"799d":function(t,i,o){},a771:function(t,i,o){"use strict";(function(t){o("904b");s(o("66fd"));var i=s(o("1901"));function s(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,o("5486")["createPage"])},b8a6:function(t,i,o){"use strict";o.d(i,"b",(function(){return e})),o.d(i,"c",(function(){return n})),o.d(i,"a",(function(){return s}));var s={uNumberBox:function(){return o.e("uview-ui/components/u-number-box/u-number-box").then(o.bind(null,"ff21"))},uToast:function(){return o.e("uview-ui/components/u-toast/u-toast").then(o.bind(null,"523c"))}},e=function(){var t=this,i=t.$createElement,o=(t._self._c,t.__map(t.imglist,(function(i,o){var s=t.__get_orig(i),e=t.getimgurl(i);return{$orig:s,m0:e}}))),s=t.__map(t.goodsdata.comment,(function(i,o){var s=t.__get_orig(i),e=t.getimgurl(i.headurl),n=t.__map(i.imglist,(function(i,o){var s=t.__get_orig(i),e=t.getimgurl(i);return{$orig:s,m2:e}}));return{$orig:s,m1:e,l1:n}})),e=t.ismodel?t.getimgurl(t.imgurls):null;t.$mp.data=Object.assign({},{$root:{l0:o,l2:s,m3:e}})},n=[]},e753:function(t,i,o){"use strict";o.r(i);var s=o("50f3"),e=o.n(s);for(var n in s)"default"!==n&&function(t){o.d(i,t,(function(){return s[t]}))}(n);i["default"]=e.a},eadb:function(t,i,o){"use strict";var s=o("799d"),e=o.n(s);e.a}},[["a771","common/runtime","common/vendor"]]]);